---
title: Colorado Model Extents
---

The Colorado MMI model has three distinct regions: mountains, transition and xeric plains. The original vector geometry provided by NAMC possessed several issues:

* The entire layer is nearly 7Mb which exceeds the 5Mb limit of the API. This means that users can't request these geometries.
* The smoothed curves represent excessive detail that bloats the layer size.
* The geoprocessing workflow that produced this layer introduced a considerable number of slivers that are both incorrect and also bloat the geometry.

![original]({{ site.basurl}}/assets/images/colorado/original_vector.png)

# Original Raster

The original raster was provided by NAMC on 27 July 2021. It contains raster values of 1,2 and 3 representing the three biotypes. NoData exist where no biotype is assigned (i.e. away from the river network on hillslopes).

![raster]({{site.baseurl}}/assets/images/colorado/original_raster.png)

# Processing New Vectors

Here are the geoprocessing steps taken to produce a new set of vector polygons for the new NAMC database.

1. Convert the original raster to integer (it was floating point).
1. Convert the raster to points (retaining the raster value as `grid_code`).
1. Generate Thiessen polygons for the points (retaining all fields).
1. Dissolve the Thiessen polygons by `grid_code`.
1. Clipped the dissolved polygons by the data extent of the raster, that was generated by:
    1. Reclassifying the integer raster to all zero values (including NoData).
    1. Converting the raster to polygon.

The final polygon feature class is about 2.7Mb. It looks a little more angular,
but it should be more technically correct. The Thiessen polygons ensure that any NAMC sample point will get the biotype of the closest raster cell from the original data.

![final vector]({{site.baseurl}}/assets/images/colorado/philip_vector.png)